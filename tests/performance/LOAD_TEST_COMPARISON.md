# Redis 캐시 부하 테스트 비교 결과

## 테스트 환경
- **동시 요청 수**: 50개
- **각 API당 총 요청 수**: 100개
- **총 요청 수**: 500개 (5개 API × 100개)

---

## 📊 API별 상세 비교

### 1. `/api/teams`

| 지표 | Redis OFF | Redis ON | 개선율 |
|------|-----------|----------|--------|
| **처리량** | 81.20 req/s | 93.01 req/s | **+14.5%** ✅ |
| **평균 응답 시간** | 951.60ms | 752.21ms | **-21.0%** ✅ |
| **서버 처리 시간** | 606.82ms | 262.50ms | **-56.7%** ✅✅ |
| **최소 응답 시간** | 535.44ms | 207.74ms | **-61.2%** ✅✅ |
| **95% 응답 시간** | 1211.30ms | 1058.24ms | **-12.6%** ✅ |

**분석**: 
- ✅ **서버 처리 시간이 56.7% 감소** - Redis 캐시가 DB 쿼리를 크게 줄임
- ✅ **처리량 14.5% 증가** - 더 많은 요청 처리 가능
- ✅ **응답 시간 21% 개선** - 사용자 경험 향상

---

### 2. `/api/dashboard`

| 지표 | Redis OFF | Redis ON | 개선율 |
|------|-----------|----------|--------|
| **처리량** | 100.00 req/s | 94.85 req/s | **-5.2%** ⚠️ |
| **평균 응답 시간** | 910.02ms | 965.42ms | **+6.1%** ⚠️ |
| **서버 처리 시간** | 616.89ms | 654.92ms | **+6.2%** ⚠️ |
| **최소 응답 시간** | 733.62ms | 848.21ms | **+15.6%** ⚠️ |
| **95% 응답 시간** | 988.87ms | 1047.79ms | **+6.0%** ⚠️ |

**분석**: 
- ⚠️ **성능이 오히려 약간 저하** - `/api/dashboard`는 캐시를 사용하지 않음 (코드 확인 필요)
- ⚠️ Redis 연결 오버헤드가 있을 수 있음

---

### 3. `/api/teams/[teamId]`

| 지표 | Redis OFF | Redis ON | 개선율 |
|------|-----------|----------|--------|
| **처리량** | 51.06 req/s | 52.56 req/s | **+2.9%** ✅ |
| **평균 응답 시간** | 1952.07ms | 1865.25ms | **-4.4%** ✅ |
| **서버 처리 시간** | 139.89ms | 195.71ms | **+39.9%** ⚠️ |
| **최소 응답 시간** | 1941.25ms | 1852.50ms | **-4.6%** ✅ |
| **95% 응답 시간** | 1958.14ms | 1902.24ms | **-2.9%** ✅ |

**분석**: 
- ✅ **응답 시간 4.4% 개선** - 약간의 개선
- ⚠️ **서버 처리 시간 증가** - 네트워크 지연 또는 Redis 연결 오버헤드 가능성
- 전체 응답 시간은 개선되었지만 서버 측 시간은 증가 (네트워크 지연 가능성)

---

### 4. `/api/teams/[teamId]/channels`

| 지표 | Redis OFF | Redis ON | 개선율 |
|------|-----------|----------|--------|
| **처리량** | 77.86 req/s | 53.67 req/s | **-31.1%** ⚠️ |
| **평균 응답 시간** | 1123.13ms | 1798.64ms | **+60.1%** ⚠️ |
| **서버 처리 시간** | 540.09ms | 228.89ms | **-57.6%** ✅✅ |
| **최소 응답 시간** | 508.11ms | 1750.20ms | **+244.5%** ⚠️ |
| **95% 응답 시간** | 1270.90ms | 1832.64ms | **+44.2%** ⚠️ |

**분석**: 
- ✅✅ **서버 처리 시간 57.6% 감소** - Redis 캐시 효과 명확
- ⚠️ **전체 응답 시간 증가** - 네트워크 지연 또는 테스트 환경 차이 가능성
- 서버는 빠르게 처리하지만 클라이언트 측 응답 시간이 증가 (네트워크 문제 가능성)

---

### 5. `/api/teams/[teamId]/events`

| 지표 | Redis OFF | Redis ON | 개선율 |
|------|-----------|----------|--------|
| **처리량** | 64.59 req/s | 52.82 req/s | **-18.2%** ⚠️ |
| **평균 응답 시간** | 1289.90ms | 1827.35ms | **+41.7%** ⚠️ |
| **서버 처리 시간** | 637.91ms | 303.35ms | **-52.4%** ✅✅ |
| **최소 응답 시간** | 603.19ms | 1808.41ms | **+199.8%** ⚠️ |
| **95% 응답 시간** | 1534.13ms | 1885.52ms | **+22.9%** ⚠️ |

**분석**: 
- ✅✅ **서버 처리 시간 52.4% 감소** - Redis 캐시 효과 명확
- ⚠️ **전체 응답 시간 증가** - 네트워크 지연 가능성
- 서버는 빠르게 처리하지만 클라이언트 측에서 지연 발생

---

## 📈 전체 평균 비교

| 지표 | Redis OFF | Redis ON | 개선율 |
|------|-----------|----------|--------|
| **평균 처리량** | 74.94 req/s | 69.38 req/s | **-7.4%** ⚠️ |
| **평균 응답 시간** | 1245.34ms | 1441.77ms | **+15.8%** ⚠️ |
| **성공률** | 100.0% | 100.0% | 동일 ✅ |

---

## 🔍 핵심 발견사항

### ✅ Redis 캐시 효과가 명확한 API

1. **`/api/teams`**
   - 서버 처리 시간: **606.82ms → 262.50ms (56.7% 감소)** ✅✅
   - 처리량: **81.20 → 93.01 req/s (14.5% 증가)** ✅
   - 응답 시간: **951.60ms → 752.21ms (21.0% 감소)** ✅

### ⚠️ 주의가 필요한 API

1. **`/api/dashboard`**
   - 캐시를 사용하지 않는 것으로 보임 (코드 확인 필요)
   - Redis 연결 오버헤드만 발생

2. **`/api/teams/[teamId]/channels` & `/api/teams/[teamId]/events`**
   - 서버 처리 시간은 크게 개선 (57.6%, 52.4% 감소)
   - 하지만 전체 응답 시간은 증가
   - **네트워크 지연 또는 테스트 환경 차이 가능성**

---

## 💡 결론 및 권장사항

### 1. Redis 캐시 효과 확인
- ✅ **서버 측 처리 시간이 크게 개선됨** (특히 `/api/teams`)
- ✅ **DB 쿼리 부하가 감소하여 서버 리소스 절약**
- ✅ **캐시 히트 시 응답 시간 단축**

### 2. 개선 필요 사항

1. **`/api/dashboard` 캐시 구현**
   - 현재 캐시를 사용하지 않음
   - 캐시 추가로 성능 개선 가능

2. **네트워크 지연 조사**
   - 일부 API에서 서버 시간은 개선되었지만 전체 응답 시간 증가
   - 네트워크 설정 또는 테스트 환경 확인 필요

3. **캐시 전략 최적화**
   - 캐시 TTL 조정
   - 캐시 키 전략 개선
   - 캐시 워밍업 전략 고려

### 3. 실제 운영 환경에서의 기대 효과

- **트래픽이 높을수록 Redis 캐시 효과가 더 명확하게 나타남**
- **DB 부하 감소로 서버 안정성 향상**
- **사용자 경험 개선** (특히 `/api/teams`)

---

## 📝 테스트 방법 개선 제안

1. **네트워크 지연 제거**
   - 로컬 환경에서 테스트
   - 서버 측 시간만 비교

2. **캐시 워밍업**
   - 테스트 전 캐시 미리 로드
   - 실제 사용 패턴 반영

3. **더 긴 테스트 기간**
   - 캐시 히트율 측정
   - 장기적인 성능 추이 확인

---

**테스트 일시**: 2024년
**테스트 환경**: Windows, Node.js, Redis (Docker)



